<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Problem 2188</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="MathJax-4.0.0/tex-svg.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 40px; }
h1 { font-size: 1.6em; }
.difficulty { color: gray; font-size: 0.95em; margin-top: 6px; } .skib {  border-left: 4px solid #000; /* Bold left accent */   background-color: lavender; /* Very light gray */   padding: 1px 20px; /* less top/bottom padding, same left/right */   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Soft depth */}
.skib {
  border-left: 4px solid #000; /* Bold left accent */
  /* we chillin */ /* Very light gray */
  padding: 1px 20px; /* less top/bottom padding, same left/right */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Soft depth */
}	
p { line-height: 1.45; }
ol, ul { margin-left: 1.2em; }
li { margin-bottom: 0.4em; }
</style>
</head>
<body>
<h1>Problem 2188 - 2005 IMOSL, N4, N</h1>
<h2 class='difficulty'>Difficulty: 7</h2>
<p>Find all positive integers \(n > 1\) such that there exists a unique integer \(a \in \{1, 2, \dots, n!\}\) with \(n! \mid a^n+1\).</p>
<h2>Thinking</h2>
<div class=skib>
<p>Alright, note that \(a^n \equiv -1 \pmod{n!}\) means that \(a^n \equiv -1 \pmod{i}\) for all \(i\) from \(1\) to \(n\). This means that \(a^n \equiv -1 \pmod{\text{lcm}(1, 2, \dots, n)}\). For the sake of convenience, let this lcm be equal to \(L_n\). Obviously, if \(n\) is odd, then \(a \equiv -1\) satisfies \(a^n \equiv -1\), so we must show that nothing but \(n! - 1\) satisfies this equation. This is equivalent to showing that nothing but \(1\) satisfies \(a^n \equiv 1 \pmod{n!}\), so we'll look at this equation now.</p>
<p>Suppose \(p\) is an odd prime - then \(a^p \equiv 1 \pmod{p!}\) means that the order of \(a\) mod \(p!\) divides \(\gcd(p, \phi(p!))\) since \(a\) must be relatively prime to \(p!\). But \(\gcd(p, \phi(p!)) = 1\), which means \(a \equiv 1 \pmod{p!}\) - thus all primes \(p\) work!</p>
<p>Now for some general odd \(n\), the congruence \(a^n \equiv 1 \pmod{n!}\) means \(a = kL + 1\) for some \(0 \le k < n!/L\). We want to show that \(k = 0\) is the only solution of
\[(kL + 1)^n \equiv 1 \pmod{n!} \implies \sum_{i=1}^n (kL)^i \binom{n}{i} \equiv 0 \pmod{n!}\]
Let \(p \mid n\) be the smallest prime divisor of \(n\), and \(k = n!/Lp\). This means \(kL = n!/p\), but now note that since \(p^2 \mid n!\) is obviously true, 
\[\sum_{i=1}^n \left(\frac{n!}{p}\right)^i \binom{n}{i} = (n!) \sum_{i = 1}^n \left(\frac{n!}{p}\right)^{i-2} \binom{n}{i} \frac{n!}{p^2} = n! z \equiv 0 \pmod{n!} \]
for some \(z \in \mathbf{N}\). This means that \(a \equiv 1\) is not the unique solution to \(a^n \equiv 1 \pmod{n!}\), which implies \(a \equiv -1\) is not the unique solution to \(a^n \equiv -1 \pmod{n!}\).</p>
<p>For \(n \neq 2\) even, no value satisfies \(x^n \equiv -1 \pmod{n!}\) because that would mean some \(y\) satisfies \(y^2 \equiv -1 \pmod{4}\), impossible. Thus the only \(n\) that work are the primes.</p>
</div>
<h2>Idea</h2>
<p>NT is just spam.</p>
<p><a href="../problem_tracker.html">Back to Problem List</a></p>
</body>
</html>
