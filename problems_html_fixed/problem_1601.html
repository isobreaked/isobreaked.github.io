<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Problem 1601</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="MathJax-4.0.0/tex-svg.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 40px; }
h1 { font-size: 1.6em; }
.difficulty { color: gray; font-size: 0.95em; margin-top: 6px; } .skib {  border-left: 4px solid #000; /* Bold left accent */   background-color: lavender; /* Very light gray */   padding: 1px 20px; /* less top/bottom padding, same left/right */   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Soft depth */}
p { line-height: 1.45; }
ol, ul { margin-left: 1.2em; }
li { margin-bottom: 0.4em; }
</style>
</head>
<body>
<h1>Problem 1601 - 2022 Romania TST Day 4, P2, N</h1>
<h2 class='difficulty'>Difficulty: 7</h2>
<p>Fix a nonnegative integer \(a_0\) to define a sequence of integers \(a_0,a_1,\ldots\) by letting \(a_k,k\geq 1\) be the smallest integer (strictly) greater than \(a_{k-1}\) making \(a_{k-1}+a_k{}\) into a perfect square. Let \(S{}\) be the set of positive integers not expressible as the difference of two terms of the sequence \((a_k)_{k\geq 0}.\) Prove that \(S\) is finite and determine its size in terms of \(a_0.\)</p>
<h2>Thinking (Mock)</h2>
<div class=skib>
<p>First note that when \(a_0 = 0\) or \(a_0 = 1\) (or any triangular number, for that matter), then the sequence we have is that of the triangular numbers
\[0, 1, 3, 6, 10, 15, \dots\]
This clearly results in a finite set of numbers that cannot be expressed as a difference - in the case of \(a_0 = 0\), there is no such integer. In the case of \(a_0 = T_n\), the \(n\)th triangular number (if \(T_0 = 0\)), we miss the numbers from \(1\) to \(n\). </p>
<p>Let us confirm or deny the following hypothesis: if \(b\) is the smallest number bigger than \(a\) such that \(a + b\) is a perfect square, then \(a\) is the biggest number smaller than \(b\) such that \(a + b\) is a perfect square. From the perspective of \(a\), the square obtained in its procedure should be the smallest square above \(2a\). From the perspective of \(b\), the square obtained in its procedure should be the biggest square below \(2b\). The statement then becomes, suppose \(a + b\) is the smallest square \( > 2a\), show that it is the biggest square \( < 2b\). FTSOC assume that there is a bigger square \(< 2b\). Suppose this square is \(2b - k\), then since \(a + b\) and \(2b - k\) are both consecutive squares, \(2a + k + 2\) must also be a square bigger than \(2a\) but smaller than \(a + b\), a contradiction. In edge cases, it can also be \(a + b + 1\) or \(a + b + 2\) but this is easily eliminated since no two squares have a difference of \(1\) or \(2\). (okay, this argument was peak 'why things are true' analysis). </p>
<p>Great, moving on. Look at the terms \(a_{n-1}\), \(a_n\) and \(a_{n+1}\). Since \(a_{n-1}\) is the biggest number lesser than \(a_n\) such that \(a_{n-1} + a_n\) is a perfect square, and \(a_{n+1}\) is the smallest number bigger than \(a_n\) such that \(a_n + a_{n+1}\) is a perfect square, these two must be consecutive squares, <i>unless</i> \(2a_n\) is a perfect square. Is it possible to show that \(n = 0\) is the only value for which \(2a_n\) is a perfect square? Okay - suppose some \(a_n = k^2/2\) for \(n > 0\). Then \(a_{n-1} + a_n\) cannot be \(k^2\), and must be \((k - 1)^2\). 
\[a_{n-1} = \frac{k^2}{2} - 2k + 1\]
\[(k - 2)^2 - a_{n-1} = \frac{k^2}{2} - 2k + 3 > a_{n-1}\]
This means that in fact there is no \(a_{n-1}\) such that \(a_n\) is half of a square - only \(a_0\) can be. So indeed \(a_n + a_{n-1}\) and \(a_n + a_{n+1}\) are always consecutive squares. So if \(a_0 + a_1 = n^2\), then \(a_1 + a_2 = (n + 1)^2\), and so on, and taking the differences of form \(a_{i + 2} - a_i\), we get all the odd numbers \(\ge 2n + 1\). Since \(a_0 + a_1 = n^2\), we must have \((n-1)^2/2 \le a_0 < n^2/2\). 
\[a_0 = \frac{n^2}{2} - d, \;\;\;\; a_1 = \frac{n^2}{2} + d, \;\;\;\; a_2 = \frac{n^2}{2} + 2n + 1 - d, \;\;\;\; a_3 = \frac{n^2}{2} + 2n + 3 + d, \;\;\;\; \dots\]
\[a_1 - a_0 = 2d, \;\;\;\; a_3 - a_2 = 2d + 2, \;\;\;\; \dots\]
\[a_2 - a_1 = 2n + 1 - 2d, \;\;\;\; a_4 - a_3 = 2n + 3 - 2d\]
So all the even numbers \(\ge 2d\) are covered, and all the odd numbers \(\ge 2n + 1 - 2d\) are covered. It is clear that no even number smaller than \(2d\) can be covered, and no odd number smaller than \(2n + 1 - 2d\) can be covered. Thus \(d - 1\) even numbers are not covered, and \(n - d\) odd numbers are not covered, giving a total of \(n - 1 = \lfloor 2 \sqrt{a_0} \rfloor\) numbers not covered. 
</p>
</div>
<h2>Idea</h2>
<p>Take hints from small cases and remember the 'why things are true' mindset. </p>
<p><a href="../problem_tracker.html">Back to Problem List</a></p>
</body>
</html>
