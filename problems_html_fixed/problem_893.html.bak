<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Problem 893</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
body { font-family: Arial, sans-serif; margin: 40px; }
h1 { font-size: 1.6em; }
.difficulty { color: gray; font-size: 0.95em; margin-top: 6px; }
.skib {
  border-left: 4px solid #000; /* Bold left accent */
  background-color: #dedede; /* Very light gray */
  padding: 1px 20px; /* less top/bottom padding, same left/right */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); /* Soft depth */
}	
p { line-height: 1.45; }
ol, ul { margin-left: 1.2em; }
li { margin-bottom: 0.4em; }
</style>
</head>
<body>
<h1>Problem 893 - 2019 Taiwan ``IMOC'', A4</h1>
<h2 class='difficulty'>Difficulty: 7</h2>
<p>Find all functions \(f: \mathbb{N} \rightarrow \mathbb{N}\) so that
\[f^{2 f(b)}(2 a)=f(f(a+b))+a+b\]
holds for all positive integers \(a\), \(b\).</p>
<h2>Thinking</h2>
<div class=skib>
<p>First thing I noticed is that \(a = b\) gives \(f(a) = 1\) never holds. 
\[f^{2f(a)}(2a) = f(f(2a)) + 2a\]
Also the functional equation we have is kind of on \(f^2\) apart from the \(f(b)\) iterations. Symmetry gives
\[f^{2f(b)}(2a) = f^{2f(a)}(2b) = f^{2f(1)}(2a+2b-2) = f^{2f(a+b-1)}(2)\]</p>
<p>Injectivity would be a very interesting thing to have. Some long chain of 'wanting' things thoughts later, I have the following ideas - show nonexistence of fixed points, then get \(f(2a) = f(2b) \implies f(a) = f(b)\) from third equation, then injectivity from second. The nonexistence of even fixed points (also nonexistence of \(f^n(2x) = 2x\)) is clear from the main equation. Suppose some \(2a + 1\) is a fixed point, then
\[f^{2f(1)}(4a) = 4a + 2 = f^{2f(2a)}(2)\]
\[f^{4a + 2}(2x) = f(f(x + 2a + 1)) + x + 2a + 1 = f^{2f(x)}(4a+2)\]
\[f^{4a+2}(4a+2) = f(f(4a+2)) + 4a+2\]
Interestingly, we don't need nonexistence of odd fixed points if we can show \(f(f(x))\) and \(x\) have the same parity. Let us leave this for now and look at injectivity directly. Suppose \(f(a) = f(b)\) for \(a < b\), which would mean   
\[f^{2f(a)}(2x) = f^{2f(b)}(2x)\]
\[f^{2f(x)}(2a) = f^{2f(x)}(2b)\]
\[f((x + a)) + x + a = f(f(x + b)) + x + b \implies f(f(y)) = f(f(y + (b-a))) + (b-a) \;\; \text{for } y > b - a\]
But this eventually leads to \(f\) being negative, which is a contradiction, and hence \(f\) is injective!
</p>
<p>Alright, now we're getting somewhere. Finally we go back to 
\[f^{2f(a)}(2b) = f^{2f(b)}(2a)\]
Suppose \(f(a) > f(b)\). Then 
\[f^{2f(a) - 2f(b)}(2b) = 2a\]
This confirms that there is at most one even number not in the image of \(f\). Okay let us just double count
\[f^{2f(a)}(2b + 2c) = f^{2f(b)}(2a + 2c) \implies f^{2f(a) - 2f(b)}(2b + 2c) = 2a + 2c\]
So \(f^{2f(a) - 2f(b)}(n) = n + 2(a - b)\) is true for all sufficiently large even \(n\) if \(f(a) > f(b)\). This would be very good very fast if we could guarantee increasing, because then we would get \(f^{2f(a+1) - 2f(a)}(n) = n + 2\), and \(f^{2f(a+2) - 2f(a+1)} = n + 2\). This would mean \(f^x(n+2) = n+2\) for some \(x\), implying \(x = 0\) and linearity of \(f\) via \(f(a) + f(a+2) = 2f(a+1)\). This would finish, giving \(\boxed{f(x)= x+1}\) the only solution, which works. </p>
<p>This is very annoying. Let us show that \(f\) is increasing. Suppose \(a < b\) and yet still \(f(a) > f(b)\). We have then 
\[f^{2f(a) - 2f(b)}(2b + 2c) = 2a + 2c\]
But also, we have
\[f^{2f(k+a) - 2f(k+b)}(2b + 2c) = 2a + 2c\]
This of course is not directly (but soon would be) enough to conclude \(f(k + a) - f(k + b) = f(a) - f(b)\), but it is certainly enough to conclude that \(f(k + a) > f(k+ b)\) for all \(k \ge 0\), because otherwise, there is some \(n\) such that \(f^n(2b + 2c) = 2b + 2c\).
\[f(k + a) > f(k + b) > f(k + b + (b - a)) > \dots > f(k + b + n(b-a))\]
But this means that \(f\) goes negative after some point, a contradiction - thus \(f\) is strictly increasing. So we are done.</p>	
</div>
<h2>Idea</h2>
<p>Again, tandem of motivatable ideas FE, as is expected of a d7 FE. The <i>chain of wants</i> is very useful.</p>
<p><a href="../problem_tracker.html">Back to Problem List</a></p>
</body>
</html>
